#!/usr/bin/sh

set -u

HOST="127.0.0.1"

if [ -n "$4" ]; then
  echo "Will use host: '$4'"
  HOST=$4
fi
case "$1" in
on)
  if [[ "$2" == "" ]]; then
    echo "Please give port, like 'p on 8080'"
    return 1
  fi
  export HTTP_PROXY="http://$HOST:$2"
  export HTTPS_PROXY="http://$HOST:$2"
  export ALL_PROXY="socks5://$HOST:$3"
  proxy
  ;;
off)
  unset HTTP_PROXY
  unset HTTPS_PROXY
  unset ALL_PROXY
  echo "unset PROXY"
  ;;
*)
  echo "HTTP  = $HTTP_PROXY"
  echo "HTTPS = $HTTPS_PROXY"
  echo "ALL   = $ALL_PROXY"
  ;;
esac
