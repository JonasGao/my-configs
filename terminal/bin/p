#!/bin/sh

########################
## set proxy helper
## 'p on 8080'
## install use 
## curl 'https://raw.githubusercontent.com/JonasGao/my-configs/master/terminal/bin/p' -o p && chmod 700 p

HOST="127.0.0.1"

if [ -n "$4" ]; then
  echo "Will use host: '$4'"
  HOST=$4
fi

function show {
  echo "HTTP  = $HTTP_PROXY"
  echo "HTTPS = $HTTPS_PROXY"
  echo "ALL   = $ALL_PROXY"
}

case "$1" in
on)
  if [[ "$2" == "" ]]; then
    echo "Please give port, like 'p on 8080'"
    return 1
  fi
  export HTTP_PROXY="http://$HOST:$2"
  export HTTPS_PROXY="http://$HOST:$2"
  export ALL_PROXY="socks5://$HOST:$3"
  show
  ;;
off)
  unset HTTP_PROXY
  unset HTTPS_PROXY
  unset ALL_PROXY
  echo "unset PROXY"
  ;;
*)
  show
  ;;
esac
